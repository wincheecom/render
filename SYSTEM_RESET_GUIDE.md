# 系统重置指南

本指南介绍如何使用系统重置功能来完全重置 Funseek 发货管理系统到干净状态。

## 重置功能概述

系统重置功能包括以下操作：
1. 删除并重新创建数据库中的所有表（products、tasks、history、activities 和 users 表）
2. 清除 R2 存储中的所有对象（如图片等文件）
3. 确保服务器在重启后能从干净状态开始运行

## 使用方法

### 完整系统重置

运行以下命令来执行完整的系统重置：

```bash
npm run reset-system
```

这将按顺序执行以下操作：
- 清除 R2 存储桶中的所有对象（如果 R2 已配置）
- 删除所有数据库表
- 重新创建所有数据库表

### 单独操作

如果只需要执行特定操作，可以使用以下命令：

#### 只删除数据库表：
```bash
npm run drop-tables
```

#### 只创建数据库表：
```bash
npm run create-tables
```

#### 只清除 R2 存储桶：
```bash
npm run clear-r2
```

## 注意事项

1. **数据丢失风险**：此操作会永久删除所有数据，包括产品信息、任务记录、历史数据和活动日志。请确保这是您想要的结果。

2. **R2 授权**：如果 R2 配置不正确或授权失败，R2 清理步骤会跳过但不会影响数据库重置操作。

3. **环境配置**：确保正确配置了数据库连接参数（DB_HOST、DB_USER、DB_PASSWORD、DB_NAME、DB_PORT）。

4. **适用场景**：此功能主要用于开发或测试环境，用于彻底清除所有遗留数据并重建数据库和存储系统。

## 重新启动服务器

重置完成后，建议重新启动服务器以确保所有更改生效：

```bash
npm start
```

或者在开发模式下：

```bash
npm run dev
```